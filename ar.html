<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Scene</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://aframe.io/releases/1.3.0/aframe-ar.js"></script>
    <style>
        body { margin: 0; }
        a-scene { width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <a-scene embedded arjs="sourceType: webcam;">
        <a-camera></a-camera>

        <a-entity
            id="ar-model"
            gltf-model="url(test.glb)"
            position="0 0 0"  <!-- Position initiale -->
            scale="1 1 1">
        </a-entity>
    </a-scene>

    <script>
        // Récupération des paramètres depuis localStorage
        const latitude = parseFloat(localStorage.getItem('latitude'));
        const longitude = parseFloat(localStorage.getItem('longitude'));
        const scale = parseFloat(localStorage.getItem('scale'));

        // Récupération de l'élément du modèle
        const arModel = document.getElementById('ar-model');

        // Exemple d'ajustement des coordonnées du modèle en fonction des coordonnées GPS
        // Ce code est un exemple et devra être ajusté selon vos besoins spécifiques
        // Conversion des coordonnées GPS en coordonnées 3D fictives
        const lat = latitude || 0;  // Définir une valeur par défaut si non défini
        const lon = longitude || 0; // Définir une valeur par défaut si non défini

        // Vous devrez ajuster la formule pour correspondre à votre espace de coordonnées 3D
        const x = lon * 100;  // Conversion fictive
        const z = lat * 100;  // Conversion fictive

        // Positionner le modèle en utilisant les coordonnées converties
        arModel.setAttribute('position', `${x} 0 ${z}`);
        arModel.setAttribute('scale', `${scale} ${scale} ${scale}`);
    </script>
</body>
</html>
